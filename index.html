<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Observações - Colégio Madi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
</head>
<body class="bg-gray-50 text-slate-800">
    <div id="root">
        <div class="bg-blue-900 text-white p-6 shadow-lg">
            <h1 class="text-2xl font-bold">Painel de Observações</h1>
            <p class="text-blue-200">Carregando dados reais...</p>
        </div>
        <div class="p-4 max-w-4xl mx-auto" id="lista-semanas">
            </div>
    </div>

    <script>
        // SUA CONFIGURAÇÃO REAL DO FIREBASE
        const firebaseConfig = {
          apiKey: "AIzaSyD9sYzRQK0yJtTK9aY_ugev6FiTYtlsZEI",
          authDomain: "meu-app-escolar-568ef.firebaseapp.com",
          projectId: "meu-app-escolar-568ef",
          storageBucket: "meu-app-escolar-568ef.firebasestorage.app",
          messagingSenderId: "251193660931",
          appId: "1:251193660931:web:8fd8faa0598dc1a36aa036"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Dados Iniciais
        const initialSchedule = [
            { id: 1, title: "Semana 1", items: [
                { id: '1-1', dia: 'Segunda', prof: 'Tereza', disc: 'Matemática', turma: '3ºA', feito: false },
                { id: '1-2', dia: 'Quarta', prof: 'Alessandra', disc: 'Física', turma: '3ºA', feito: false }
            ]}
        ];

        function render() {
            const container = document.getElementById('lista-semanas');
            db.ref('schedule').on('value', (snapshot) => {
                const data = snapshot.val() || initialSchedule;
                container.innerHTML = data.map(week => `
                    <div class="bg-white p-4 rounded-lg shadow mb-4 border-l-4 border-blue-600">
                        <h2 class="font-bold text-lg mb-2">${week.title}</h2>
                        ${week.items.map(item => `
                            <div class="flex items-center justify-between p-2 border-b last:border-0">
                                <div>
                                    <p class="font-medium ${item.feito ? 'line-through text-gray-400' : ''}">${item.prof}</p>
                                    <p class="text-xs text-gray-500">${item.dia} • ${item.disc} • ${item.turma}</p>
                                </div>
                                <input type="checkbox" ${item.feito ? 'checked' : ''} 
                                    class="w-6 h-6" 
                                    onclick="toggle('${week.id}', '${item.id}')">
                            </div>
                        `).join('')}
                    </div>
                `).join('');
            });
        }

        window.toggle = (weekId, itemId) => {
            db.ref('schedule').once('value').then(snap => {
                let data = snap.val();
                data.forEach(w => {
                    if(w.id == weekId) {
                        w.items.forEach(i => { if(i.id == itemId) i.feito = !i.feito; });
                    }
                });
                db.ref('schedule').set(data);
            });
        };

        render();
    </script>
</body>
</html>
